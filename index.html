<!doctype html>

<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calendrier AN â€” Accueil</title>
  <link rel="icon" href="/logoalarm-192.png" />
  <meta name="theme-color" content="#0f172a" />
  <style>
    :root{--bg:#0f172a;--card:#111827;--muted:#6b7280;--accent:#2563eb;--text:#e5e7eb;--ok:#16a34a;--danger:#ef4444}
    *{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:#0b1220;color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;backdrop-filter:blur(6px);background:rgba(2,6,23,.7);border-bottom:1px solid rgba(148,163,184,.15);z-index:50}
    .nav{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:10px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand img{width:34px;height:34px;border-radius:9px}
    .menu{display:flex;gap:10px;flex-wrap:wrap}
    .btn{padding:10px 14px;border-radius:12px;background:#0b1220;border:1px solid rgba(148,163,184,.2);cursor:pointer;color:var(--text)}
    .btn:hover{border-color:rgba(148,163,184,.45)}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:white}
    .btn.danger{background:transparent;border-color:rgba(239,68,68,.5);color:#fecaca}
    main{min-height:65vh}
    .card{background:linear-gradient(180deg,rgba(17,24,39,.85),rgba(2,6,23,.7));border:1px solid rgba(148,163,184,.15);border-radius:16px;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:768px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    footer{border-top:1px solid rgba(148,163,184,.15);padding:24px 0;color:var(--muted)}
    /* AUTH */
    .auth-wrap{display:grid;place-items:center;min-height:80vh;padding:16px}
    .auth{max-width:420px;width:100%}
    .field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
    input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(148,163,184,.25);background:#0b1220;color:var(--text)}
    label{color:#cbd5e1;font-size:.9rem}
    .muted{color:var(--muted);font-size:.9rem}
    .hidden{display:none !important}
    .badge{padding:2px 8px;border-radius:999px;border:1px solid rgba(148,163,184,.25);font-size:.75rem;color:#cbd5e1}
    .toast{position:fixed;right:12px;bottom:12px;padding:12px 14px;border-radius:12px;background:#111827;border:1px solid rgba(148,163,184,.2)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <img src="/logoalarm-192.png" alt="AN" />
        <span>Calendrier AN</span>
        <span id="auth-badge" class="badge hidden">DÃ©connectÃ©</span>
      </div>
      <nav class="menu">
        <a href="#/" class="btn">Accueil</a>
        <a href="#/rendezvous" class="btn">Rendezâ€‘vous</a>
        <a href="#/profil" class="btn">Profil</a>
        <button id="logoutBtn" class="btn danger hidden">Se dÃ©connecter</button>
        <a href="#/auth" id="loginBtn" class="btn primary hidden">Se connecter</a>
      </nav>
    </div>
  </header>  <main class="container">
    <!-- AUTH PAGE -->
    <section id="page-auth" class="auth-wrap hidden">
      <div class="card auth">
        <h1>CrÃ©er un compte</h1>
        <p class="muted">Inscrisâ€‘toi pour accÃ©der Ã  ton calendrier.</p>
        <div class="field">
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="ex: vous@mail.com" />
        </div>
        <div class="field">
          <label for="password">Mot de passe</label>
          <input id="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button id="signup" class="btn primary">S'inscrire</button>
          <button id="signin" class="btn">Se connecter</button>
        </div>
        <p class="muted" style="margin-top:10px">En continuant, tu acceptes nos conditions.</p>
      </div>
    </section><!-- HOME PAGE -->
<section id="page-home" class="grid cols-2 hidden">
  <div class="card">
    <h2>Bienvenue ðŸ‘‹</h2>
    <p>Tu es connectÃ©. Ici on mettra le <strong>rÃ©sumÃ© des rendezâ€‘vous</strong>, notifications, et actions rapides.</p>
  </div>
  <div class="card">
    <h2>Prochaines actions</h2>
    <ul>
      <li>Ajouter un rendezâ€‘vous</li>
      <li>Importer depuis Google Calendar (Ã  venir)</li>
      <li>Activer les notifications PWA (Ã  venir)</li>
    </ul>
  </div>
</section>

<!-- RDV PAGE -->
<section id="page-rdv" class="hidden">
  <div class="card">
    <h2>Rendezâ€‘vous</h2>
    <p class="muted">Ici tu gÃ©reras la liste des RDV. (CRUD avec Firestore â€“ Ã  brancher)</p>
  </div>
</section>

<!-- PROFIL PAGE -->
<section id="page-profil" class="hidden">
  <div class="card">
    <h2>Profil</h2>
    <p class="muted">Email: <span id="profil-email">â€”</span></p>
  </div>
</section>

  </main>  <footer>
    <div class="container">
      Â© <span id="year"></span> Calendrier AN â€” Tous droits rÃ©servÃ©s
    </div>
  </footer>  <div id="toast" class="toast hidden"></div>  <!-- Firebase (compat) -->  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-auth-compat.js"></script>  <script type="module">
    // TODO: remplace par ta config Firebase
    const firebaseConfig = {
      apiKey: "REPLACE_ME",
      authDomain: "REPLACE_ME.firebaseapp.com",
      projectId: "REPLACE_ME",
      appId: "REPLACE_ME"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Elements
    const pageAuth   = document.getElementById('page-auth');
    const pageHome   = document.getElementById('page-home');
    const pageRDV    = document.getElementById('page-rdv');
    const pageProfil = document.getElementById('page-profil');
    const loginBtn   = document.getElementById('loginBtn');
    const logoutBtn  = document.getElementById('logoutBtn');
    const badge      = document.getElementById('auth-badge');
    const emailEl    = document.getElementById('email');
    const passEl     = document.getElementById('password');
    const toast      = document.getElementById('toast');

    document.getElementById('year').textContent = new Date().getFullYear();

    // Simple router
    const routes = {
      '#/': () => show(auth.currentUser ? 'home' : 'auth'),
      '#/auth': () => show('auth'),
      '#/rendezvous': () => guard(() => show('rdv')),
      '#/profil': () => guard(() => show('profil')),
    };

    function guard(fn){
      if(!auth.currentUser){ location.hash = '#/auth'; notify('Connecteâ€‘toi pour continuer'); return; }
      fn();
    }

    function show(page){
      [pageAuth,pageHome,pageRDV,pageProfil].forEach(s=>s.classList.add('hidden'));
      if(page==='auth') pageAuth.classList.remove('hidden');
      if(page==='home') pageHome.classList.remove('hidden');
      if(page==='rdv') pageRDV.classList.remove('hidden');
      if(page==='profil') pageProfil.classList.remove('hidden');
      loginBtn.classList.toggle('hidden', !!auth.currentUser);
      logoutBtn.classList.toggle('hidden', !auth.currentUser);
      badge.textContent = auth.currentUser? 'ConnectÃ©' : 'DÃ©connectÃ©';
      badge.classList.remove('hidden');
      document.getElementById('profil-email').textContent = auth.currentUser?.email || 'â€”';
    }

    function notify(msg){
      toast.textContent = msg; toast.classList.remove('hidden');
      setTimeout(()=>toast.classList.add('hidden'), 2200);
    }

    // Auth actions
    document.getElementById('signup').addEventListener('click', async ()=>{
      const email = emailEl.value.trim();
      const pass  = passEl.value.trim();
      try{ await auth.createUserWithEmailAndPassword(email, pass); notify('Compte crÃ©Ã©, bienvenue !'); location.hash = '#/'; }
      catch(e){ notify(e.message); }
    });

    document.getElementById('signin').addEventListener('click', async ()=>{
      const email = emailEl.value.trim();
      const pass  = passEl.value.trim();
      try{ await auth.signInWithEmailAndPassword(email, pass); notify('Connexion rÃ©ussie'); location.hash = '#/'; }
      catch(e){ notify(e.message); }
    });

    logoutBtn.addEventListener('click', async ()=>{ await auth.signOut(); notify('DÃ©connectÃ©'); location.hash = '#/auth'; });

    // Handle auth state + routing
    auth.onAuthStateChanged(()=>{ const h = location.hash || '#/'; (routes[h]||routes['#/'])(); });
    window.addEventListener('hashchange', ()=>{ const h = location.hash || '#/'; (routes[h]||routes['#/'])(); });

    // First load
    (routes[location.hash] || routes['#/'])();
  </script></body>
</html>
